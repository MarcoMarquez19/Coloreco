/**
 * themes.css - Paletas de Color y Temas de Alto Contraste
 * 
 * Define las variables CSS globales para los diferentes modos de visualización:
 * - Tema por defecto (claro)
 * - Modo Noche (dark) - Alto contraste con fondo oscuro
 * - Modo Inverso (dark-inverted) - Paleta invertida del modo noche
 */

/* ========================================
   TEMA POR DEFECTO (CLARO)
   ======================================== */
:root {
	/* Colores de fondo y texto principales */
	--bg: #ffffff;
	--fg: #111111;
	--color-texto: #000000;
	
	/* Colores de énfasis y acento */
	--accent: #0b6efd;
	--accent-hover: #0958d9;
	
	/* Colores de superficie (tarjetas, paneles, etc.) */
	--surface: #f5f5f5;
	--surface-hover: #e8e8e8;
	
	/* Bordes y divisores */
	--border: #e0e0e0;
	--border-strong: #cccccc;
	
	/* Texto secundario */
	--text-secondary: #666666;
	--text-muted: #999999;
	
	/* Estados (éxito, error, advertencia) */
	--success: #28a745;
	--error: #dc3545;
	--warning: #ffc107;

	/* ========================================
	   VARIABLES DE ACCESIBILIDAD (HU-01 a HU-08)
	   ======================================== */
	
	/* HU-02: Lectura biónica */
	--bionic-highlight-color: #003366;
	--bionic-rest-opacity: 0.8;
	
	/* HU-03: Narración auditiva */
	--narration-highlight-bg: #FFE66D;
	--narration-highlight-shadow: 0 2px 8px rgba(255, 230, 109, 0.4);
	
	/* HU-04: Rimas y sílabas */
	--rhyme-opacity: 0.9;
	--syllable-opacity: 0.85;
	
	/* HU-05: Pictogramas */
	--pictogram-bg: #f5f5f5;
	--pictogram-hover-bg: #e8e8e8;
	
	/* HU-07 y HU-08: Gamificación y retroalimentación */
	--reward-gradient-start: #667eea;
	--reward-gradient-end: #764ba2;
	--feedback-success: #28a745;
	--feedback-error: #dc3545;
	--feedback-info: #17a2b8;
	
	/* Zoom y magnificación */
	--zoom-level: 1;
}

/* ========================================
   MODO NOCHE (DARK)
   Alto contraste con fondo oscuro
   ======================================== */
[data-theme="dark"] {
	--icono-color-borde: #f5f5f5;
	--icono-color-relleno: #0a0a0a;
	--fondo-botones: #ffffff;
	--fondo-botones-hover: #d6d6d6;
	--sombra-botones: 0 6px 18px rgba(240, 227, 227, 0.3);
	--borde-botones: 4px solid #f5f5f5;
	--color-texto: #ffffff;
	
	/* Colores de fondo y texto invertidos para alto contraste */
	--bg: #0a0a0a;
	--fg: #f5f5f5;
	
	/* Estados adaptados al tema oscuro */
	--exito: #4ade80;
	--error: #f87171;
	--advertencia: #fbbf24;

	/* Variables de accesibilidad adaptadas */
	--background-color: #0a0a0a;
	--text-color: #f5f5f5;
	--bionic-highlight-color: #90CAF9;
	--narration-highlight-bg: #fbbf24;
	--pictogram-bg: #1a1a1a;
	--pictogram-hover-bg: #2a2a2a;
}

/* Aplicar filtro de alto contraste a elementos gráficos en modo noche */
[data-theme="dark"] img,
[data-theme="dark"] video,
[data-theme="dark"] svg {
	filter: contrast(120%);
}

/* ========================================
   MODO INVERSO (DARK-INVERTED)
   Paleta invertida del modo noche
   ======================================== */
[data-theme="dark-inverted"] {
	--icono-color-borde: #000000;
	--icono-color-relleno: #ffffff;
	--fondo-botones: #000000;
	--fondo-botones-hover: #808080;
	--sombra-botones: 0 6px 18px rgba(0, 0, 0, 0.3);
	--borde-botones: 4px solid #000000;
	--color-texto: #000000;

	/* Inversión completa: texto oscuro sobre fondo claro extremo */
	--bg: #f5f5f5;
	--fg: #0a0a0a;
	
	/* Estados con paleta inversa */
	--exito: #15803d;
	--error: #b91c1c;
	--advertencia: #d97706;

	/* Variables de accesibilidad adaptadas */
	--background-color: #f5f5f5;
	--text-color: #0a0a0a;
	--bionic-highlight-color: #003366;
	--narration-highlight-bg: #fbbf24;
	--pictogram-bg: #e0e0e0;
	--pictogram-hover-bg: #d0d0d0;
}

/* Aplicar filtro de alto contraste a elementos gráficos en modo inverso */
[data-theme="dark-inverted"] img,
[data-theme="dark-inverted"] video,
[data-theme="dark-inverted"] svg {
	filter: contrast(120%);
}

/* ========================================
   APLICACIÓN GLOBAL DE LAS VARIABLES
   ======================================== */

/* Asegurar que el body use las variables de tema */
body {
	background-color: var(--bg);
	color: var(--fg);
	transition: background-color 200ms ease, color 200ms ease;
}

/* Respetar preferencias de movimiento reducido */
@media (prefers-reduced-motion: reduce) {
	body {
		transition: none;
	}
	
	[data-theme="dark"] img,
	[data-theme="dark"] video,
	[data-theme="dark"] svg,
	[data-theme="dark-inverted"] img,
	[data-theme="dark-inverted"] video,
	[data-theme="dark-inverted"] svg {
		transition: none;
	}
}

/* ========================================
   MODOS DE ACCESIBILIDAD (CSS PURO)
   ======================================== */

/* MODO BIÓNICO: Resalta las primeras sílabas de cada palabra */
[data-bionic="true"] .bionic-highlight {
	font-weight: 700;
	color: var(--bionic-highlight-color);
}

/* Cuando biónico está dentro de rima, heredar el color blanco */
[data-bionic="true"] .rhyme-highlight .bionic-highlight {
	font-weight: 700;
	color: inherit !important;
}

[data-bionic="true"] .bionic-rest {
	font-weight: 400;
	color: inherit;
}

[data-bionic="true"] .rhyme-highlight .bionic-rest {
	font-weight: 400;
	color: inherit !important;
}

/* MODO PICTOGRAMAS: Los pictogramas ahora se gestionan desde JavaScript */
/* Ver: src/lib/juegos/modos/historias/pictograms/index.ts */
/* Solo mantenemos estilos generales, NO añadimos contenido con ::before */

/* MODO RIMA: Colorea el fondo de palabras que riman */
[data-rhyme="true"] .rhyme-word {
	padding: 0.2rem 0.4rem;
	border-radius: 4px;
	margin: 0 0.1rem;
	display: inline-block;
	font-weight: 600;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Colores diferentes para grupos de rimas */
[data-rhyme="true"] .rhyme-word[data-rhyme-group="0"] {
	background: #FFE66D;
	color: #333;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="1"] {
	background: #FF6B6B;
	color: #fff;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="2"] {
	background: #4ECDC4;
	color: #fff;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="3"] {
	background: #95E1D3;
	color: #333;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="4"] {
	background: #A8E6CF;
	color: #333;
}

/* Cuando ambos modos están activos: el biónico se mantiene dentro del rhyme-word */
[data-bionic="true"][data-rhyme="true"] .rhyme-word .bionic-highlight {
	font-weight: 700;
	/* El color se hereda del rhyme-word para mejor legibilidad */
}

[data-bionic="true"][data-rhyme="true"] .rhyme-word .bionic-rest {
	font-weight: 400;
	opacity: 0.8;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="4"] {
	background: #A8E6CF;
	color: #333;
}

/* MODO NARRACIÓN: Indicador visual de que está activo */
[data-narration="true"] body {
	border-left: 4px solid var(--narration-highlight-bg);
}

[data-narration="true"] h1,
[data-narration="true"] h2,
[data-narration="true"] p {
	/* Estilos de narración sin efectos hover */
}

