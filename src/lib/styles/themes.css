/**
 * themes.css - Paletas de Color y Temas de Alto Contraste
 * 
 * Define las variables CSS globales para los diferentes modos de visualizaci√≥n:
 * - Tema por defecto (claro)
 * - Modo Noche (dark) - Alto contraste con fondo oscuro
 * - Modo Inverso (dark-inverted) - Paleta invertida del modo noche
 */

/* ========================================
   TEMA POR DEFECTO (CLARO)
   ======================================== */
:root {
	/* Colores de fondo y texto principales */
	--bg: #ffffff;
	--fg: #111111;
	
	/* Colores de √©nfasis y acento */
	--accent: #0b6efd;
	--accent-hover: #0958d9;
	
	/* Colores de superficie (tarjetas, paneles, etc.) */
	--surface: #f5f5f5;
	--surface-hover: #e8e8e8;
	
	/* Bordes y divisores */
	--border: #e0e0e0;
	--border-strong: #cccccc;
	
	/* Texto secundario */
	--text-secondary: #666666;
	--text-muted: #999999;
	
	/* Estados (√©xito, error, advertencia) */
	--success: #28a745;
	--error: #dc3545;
	--warning: #ffc107;

	/* ========================================
	   VARIABLES DE ACCESIBILIDAD (HU-01 a HU-08)
	   ======================================== */
	
	/* HU-02: Lectura bi√≥nica */
	--bionic-highlight-color: #0b6efd;
	--bionic-rest-opacity: 0.8;
	
	/* HU-03: Narraci√≥n auditiva */
	--narration-highlight-bg: #FFE66D;
	--narration-highlight-shadow: 0 2px 8px rgba(255, 230, 109, 0.4);
	
	/* HU-04: Rimas y s√≠labas */
	--rhyme-opacity: 0.9;
	--syllable-opacity: 0.85;
	
	/* HU-05: Pictogramas */
	--pictogram-bg: #f5f5f5;
	--pictogram-hover-bg: #e8e8e8;
	
	/* HU-07 y HU-08: Gamificaci√≥n y retroalimentaci√≥n */
	--reward-gradient-start: #667eea;
	--reward-gradient-end: #764ba2;
	--feedback-success: #28a745;
	--feedback-error: #dc3545;
	--feedback-info: #17a2b8;
	
	/* Zoom y magnificaci√≥n */
	--zoom-level: 1;
}

/* ========================================
   MODO NOCHE (DARK)
   Alto contraste con fondo oscuro
   ======================================== */
[data-theme="dark"] {
	--icono-color-borde: #f5f5f5;
	--icono-color-relleno: #0a0a0a;
	--fondo-botones: #ffffff;
	--fondo-botones-hover: #d6d6d6;
	--sombra-botones: 0 6px 18px rgba(240, 227, 227, 0.3);
	--borde-botones: 4px solid #f5f5f5;
	--color-texto: #ffffff;
	
	/* Colores de fondo y texto invertidos para alto contraste */
	--bg: #0a0a0a;
	--fg: #f5f5f5;
	
	/* Estados adaptados al tema oscuro */
	--exito: #4ade80;
	--error: #f87171;
	--advertencia: #fbbf24;

	/* Variables de accesibilidad adaptadas */
	--background-color: #0a0a0a;
	--text-color: #f5f5f5;
	--bionic-highlight-color: #60a5fa;
	--narration-highlight-bg: #fbbf24;
	--pictogram-bg: #1a1a1a;
	--pictogram-hover-bg: #2a2a2a;
}

/* Aplicar filtro de alto contraste a elementos gr√°ficos en modo noche */
[data-theme="dark"] img,
[data-theme="dark"] video,
[data-theme="dark"] svg {
	filter: contrast(120%);
}

/* ========================================
   MODO INVERSO (DARK-INVERTED)
   Paleta invertida del modo noche
   ======================================== */
[data-theme="dark-inverted"] {
	--icono-color-borde: #000000;
	--icono-color-relleno: #ffffff;
	--fondo-botones: #000000;
	--fondo-botones-hover: #808080;
	--sombra-botones: 0 6px 18px rgba(0, 0, 0, 0.3);
	--borde-botones: 4px solid #000000;
	--color-texto: #000000;

	/* Inversi√≥n completa: texto oscuro sobre fondo claro extremo */
	--bg: #f5f5f5;
	--fg: #0a0a0a;
	
	/* Estados con paleta inversa */
	--exito: #15803d;
	--error: #b91c1c;
	--advertencia: #d97706;

	/* Variables de accesibilidad adaptadas */
	--background-color: #f5f5f5;
	--text-color: #0a0a0a;
	--bionic-highlight-color: #0958d9;
	--narration-highlight-bg: #fbbf24;
	--pictogram-bg: #e0e0e0;
	--pictogram-hover-bg: #d0d0d0;
}

/* Aplicar filtro de alto contraste a elementos gr√°ficos en modo inverso */
[data-theme="dark-inverted"] img,
[data-theme="dark-inverted"] video,
[data-theme="dark-inverted"] svg {
	filter: contrast(120%);
}

/* ========================================
   APLICACI√ìN GLOBAL DE LAS VARIABLES
   ======================================== */

/* Asegurar que el body use las variables de tema */
body {
	background-color: var(--bg);
	color: var(--fg);
	transition: background-color 200ms ease, color 200ms ease;
}

/* Respetar preferencias de movimiento reducido */
@media (prefers-reduced-motion: reduce) {
	body {
		transition: none;
	}
	
	[data-theme="dark"] img,
	[data-theme="dark"] video,
	[data-theme="dark"] svg,
	[data-theme="dark-inverted"] img,
	[data-theme="dark-inverted"] video,
	[data-theme="dark-inverted"] svg {
		transition: none;
	}
}

/* ========================================
   MODOS DE ACCESIBILIDAD (CSS PURO)
   ======================================== */

/* MODO BI√ìNICO: Resalta las primeras s√≠labas de cada palabra */
[data-bionic="true"] .bionic-highlight {
	font-weight: 700;
	color: var(--bionic-highlight-color);
}

/* Cuando bi√≥nico est√° dentro de rima, heredar el color blanco */
[data-bionic="true"] .rhyme-highlight .bionic-highlight {
	font-weight: 700;
	color: inherit !important;
}

[data-bionic="true"] .bionic-rest {
	font-weight: 400;
	color: inherit;
}

[data-bionic="true"] .rhyme-highlight .bionic-rest {
	font-weight: 400;
	color: inherit !important;
}

/* MODO PICTOGRAMAS: Agrega indicadores visuales espec√≠ficos por contexto */
/* Solo aplicar a elementos que NO tienen contenido SVG o iconos */
[data-pictogram="true"] h1:not(:has(svg)):not(:has(img))::before {
	content: "üëã ";
	margin-right: 0.5rem;
	font-size: 1.2em;
}

[data-pictogram="true"] h2:not(:has(svg)):not(:has(img))::before {
	content: "üé® ";
	margin-right: 0.5rem;
	font-size: 1.2em;
}

[data-pictogram="true"] h3:not(:has(svg)):not(:has(img))::before {
	content: "üìù ";
	margin-right: 0.5rem;
	font-size: 1em;
}

/* No aplicar a botones con clase espec√≠fica (botones de control que ya tienen iconos) */
[data-pictogram="true"] button:not(.boton-volver):not(.boton-configuracion):not(.control-button):not(.switch-toggle):not(.capitulo-imagen):not(.boton-juego):not(.boton-estudio):not(.boton-nuevo):not(.boton-logro):not(.elemento-interactivo):not(:has(svg))::before {
	content: "‚ñ∂Ô∏è ";
	margin-right: 0.5rem;
	font-size: 1.2em;
}

/* Labels espec√≠ficos con pictogramas personalizados seg√∫n su contenido */
/* Lupa M√°gica */
[data-pictogram="true"] label.switch-label[for="toggle-magnifier"]::before {
	content: "üîç ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Tama√±o de fuente */
[data-pictogram="true"] label.switch-label[for="toggle-font-size"]::before {
	content: "üî§ ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Espaciado */
[data-pictogram="true"] label.switch-label[for="toggle-spacing"]::before {
	content: "‚ÜîÔ∏è ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Modo Noche */
[data-pictogram="true"] label.switch-label[for="toggle-modo-noche"]::before {
	content: "üåô ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Modo Inverso */
[data-pictogram="true"] label.switch-label[for="toggle-modo-inverso"]::before {
	content: "üîÑ ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Modo Bi√≥nico */
[data-pictogram="true"] label.switch-label[for="toggle-bionic"]::before {
	content: "üß† ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Modo Rima */
[data-pictogram="true"] label.switch-label[for="toggle-rhyme"]::before {
	content: "üéµ ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Modo Pictograma */
[data-pictogram="true"] label.switch-label[for="toggle-pictogram"]::before {
	content: "üñºÔ∏è ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Narraci√≥n */
[data-pictogram="true"] label.switch-label[for="toggle-narration"]::before {
	content: "üîä ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Fallback para otros labels */
[data-pictogram="true"] label.switch-label:not([for])::before {
	content: "‚öôÔ∏è ";
	margin-right: 0.3rem;
	font-size: 1em;
}

/* Fondo sutil para elementos en modo pictograma */
[data-pictogram="true"] h1:not(:has(svg)),
[data-pictogram="true"] h2:not(:has(svg)),
[data-pictogram="true"] h3:not(:has(svg)) {
	background: var(--pictogram-bg);
	padding: 0.4rem 0.8rem;
	border-radius: 8px;
	transition: all 0.2s ease;
}

[data-pictogram="true"] h1:not(:has(svg)):hover,
[data-pictogram="true"] h2:not(:has(svg)):hover,
[data-pictogram="true"] h3:not(:has(svg)):hover {
	background: var(--pictogram-hover-bg, #e0e0e0);
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* MODO RIMA: Colorea el fondo de palabras que riman */
[data-rhyme="true"] .rhyme-word {
	padding: 0.2rem 0.4rem;
	border-radius: 4px;
	margin: 0 0.1rem;
	display: inline-block;
	font-weight: 600;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Colores diferentes para grupos de rimas */
[data-rhyme="true"] .rhyme-word[data-rhyme-group="0"] {
	background: #FFE66D;
	color: #333;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="1"] {
	background: #FF6B6B;
	color: #fff;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="2"] {
	background: #4ECDC4;
	color: #fff;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="3"] {
	background: #95E1D3;
	color: #333;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="4"] {
	background: #A8E6CF;
	color: #333;
}

/* Cuando ambos modos est√°n activos: el bi√≥nico se mantiene dentro del rhyme-word */
[data-bionic="true"][data-rhyme="true"] .rhyme-word .bionic-highlight {
	font-weight: 700;
	/* El color se hereda del rhyme-word para mejor legibilidad */
}

[data-bionic="true"][data-rhyme="true"] .rhyme-word .bionic-rest {
	font-weight: 400;
	opacity: 0.8;
}

[data-rhyme="true"] .rhyme-word[data-rhyme-group="4"] {
	background: #A8E6CF;
	color: #333;
}

/* MODO NARRACI√ìN: Indicador visual de que est√° activo */
[data-narration="true"] body {
	border-left: 4px solid var(--narration-highlight-bg);
}

[data-narration="true"] h1,
[data-narration="true"] h2,
[data-narration="true"] p {
	transition: background 0.3s ease;
}

[data-narration="true"] h1:hover,
[data-narration="true"] h2:hover,
[data-narration="true"] p:hover {
	background: var(--narration-highlight-bg);
	padding: 0.2rem 0.4rem;
	border-radius: 4px;
}

